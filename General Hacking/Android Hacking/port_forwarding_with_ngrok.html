<html>
	<head>
		<link rel="icon" href="https://vulnx.github.io/favicon.png">
		<script data-ad-client="ca-pub-6203666289882469" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="style.css"/>
		<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@600&family=Ubuntu:wght@500;700&display=swap" rel="stylesheet">
		<title>Android Hacking : Part-2. [Extended] How to set-up port-forwarding with NGROK | VulnX</title>

	</head>

	<body onload="fillBlank()">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-167461836-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-167461836-1');
</script>
		<ul class="topnav"><div class="x">
			<img id="logo" src="../../logo.png" onclick="reveal()">
			<div style="display: flex; justify-content: row-reverse; align-items: center;"><li><a target="_blank" href="https://vulnx.github.io/">Home</a></li>
				<li><a target="_blank" href="https://vulnx.github.io/Contents/resources.html">Resources</a></li>
				<li><a target="_blank" href="https://vulnx.github.io/Contents/tutorials.html">Tutorials</a></li>
				<li><a target="_blank" href="https://vulnx.github.io/Contents/CTFs.html">CTFs</a></li></div>
			</div>
		</ul>
		
		<div id="cookieBar">
			<div id="cookieText">By using our site, you agree to our use of cookies to deliver a better site experience</div>
			<div id="cookieButton"><span></span><span></span><span></span><span></span>&#10005;</div>
		</div>

		<div id="align">

			<font face="Fira Code">

				<center><h1>Android Hacking</h1></center>
				<center><h1>PART-2 : [Extended] How to set-up port-forwarding with NGROK<h1></center>

				Hello and welcome everybody to the extended tutorial of part-2. In this tutorial, I'll explain how you all can set-up port-forwarding with NGROK 
				
				<iframe width="100%" height="315" src="https://www.youtube.com/embed/V_9h-7kSFCM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>	
					
				<h1>STEP 1 - Downloading NGROK</h1>

				For this, just ahead over to <a href="https://www.ngrok.com"><font color="#05f">ngrok's official website</font></a>. On their website, you must click the 'SIGN UP ->' button on the top-right corner of the screen.

				<br><br><div id="image">
					<img src="images/port_forward_ngrok_homepage.png" class="responsive">
				</div><br>

				Once you click on sign up, your web browser will load a page which looks somewhat like this. Over here you need to fill up your details. For this tutorial I have created an account with fake details.

				<br><br><div id="image">
					<img src="images/port_forward_ngrok_signup_blank.png" class="responsive">
				</div><br>

				After filling up all the details, you must ensure that you have completed the captcha. After that is done you can click create an account.

				<br><br><div id="image">
					<img src="images/port_forward_ngrok_signup_filled.png" class="responsive">
				</div><br>

				Once your account is created, this page will load up. Here you need to click 'Download for Linux' button.

				<br><br><div id="image">
					<img src="images/port_forward_ngrok_download.png" class="responsive">
				</div><br>

				Once the download is complete, open a terminal session and change the directory to Downloads [ or any other path where you have downloaded this file ]. In that directory type : 

				<ul><hr class="new5">
				    unzip [FILE_NAME].zip
				<hr class="new5"><br></ul>

				<br><br><div id="image">
					<img src="images/port_forward_unzip.png" class="responsive">
				</div><br>

				Once you have unzipped the file, now you need to add authtoken to ngrok.yaml file. Doing this will connect ngrok to your account and will enable you to use more features. To get your authtoken just go back to the ngrok page and copy the code from STEP-3 'Connect your account'

				<br><br><div id="image">
					<img src="images/port_forward_authtoken_copy.png" class="responsive">
				</div><br>

				and then go back to your terminal and paste it there :-

				<br><br><div id="image">
					<img src="images/port_forward_authtoken_setup.png" class="responsive">
				</div><br>

				<h1>STEP 2 - Setting up NGROK</h1>

				Now you need to move the 'ngrok' script file to the 'bin' directory of your computer. The 'bin' folder essentially contains all the binaries which you can execute from the command line by simply typing the script name instead of manually shuffling through the folders and then putting './' and executing the script. Of course this step is optional, but I recommend you to do this, as it is more convenient to directly type 'ngrok' to start the servers. So let's quickly shift the file now

				<br><br><div id="image">
					<img src="images/port_forward_move_to_bin.png" class="responsive">
				</div><br>

				Now if you type 'ngrok' and hit enter, you can see the help menu of the script


				<br><br><div id="image">
					<img src="images/port_forward_ngrok.png" class="responsive">
				</div><br>

				Now type 'ngrok http 80', you make your localhost public [ make sure that your apache2 server is up and running, if you aren't sure then it's better to restart it, use the following command : service apache2 restart ].

				<br><br><div id="image">
					<img src="images/port_forward_http_80.png" class="responsive">
				</div><br>

				<h1>STEP 2 - Configuring NGROK</h1>

				If you just wanted to understand how to download & install ngrok, then your work is done, you can exit this webpage now, however, if you came from this <a href="https://www.vulnx.github.io/General%20Hacking/Android%20Hacking/hack_android_wan.html"><font color="#05f">tutorial</font></a>, and want to configure ngrok to suite the need of that <a href="https://www.vulnx.github.io/General%20Hacking/Android%20Hacking/hack_android_wan.html"><font color="#05f">tutorial</font></a>, then you can continue reading further.<br><br>

				So we need to run ngrok on two protocols, the first is HTTP to make our localhost fake apache2 page become publicly available to all external networks, and second is TCP in order to establish a <b>'reverse_tcp'</b> connection. If you have taken the professional version of ngrok then you can skip this step and directly start two ngrok sessions, first with http at port 80, and second with tcp and port 1501. However if you chose to take the free version like me, then ngrok won't support the use of multiple tunnels at once, so what you can do is that you will need to configure the ngrok.yaml file. To do that open a terminal session and type the following command:

				<br><br><div id="image">
					<img src="images/port_forward_nano_yaml_file.png" class="responsive">
				</div><br>

				And then add the following lines,

				<pre><div id="snip">tunnels:
  first:
    addr: 80
    proto: http
  second:
    addr: 1501
    proto: tcp
				</div></pre>

				<hr class="new5"><br></ul></font>

				Once you add the lines your file must look like this :-

				<br><br><div id="image">
					<img src="images/port_forward_ngrok.yaml.png" class="responsive">
				</div><br>

				Now once that's over, you can type 'ngrok start --all' to start all ngrok tunnels at once.

				<br><br><div id="image">
					<img src="images/port_forward_multiple_sessions.png" class="responsive">
				</div><br>
				
				Alright so I hope you must have successfully set-up ngrok account, as the process was quite simple. Now you can continue to read this <a href="https://www.vulnx.github.io/General%20Hacking/Android%20Hacking/hack_android_wan.html"><font color="#05f">page</font></a>.


				<div id="align_right">
					Good Luck,<br>
					VulnX
					<br>
				</div>

				<hr class="new5">

		</div>

		<script type="text/javascript">
			function setCookie(cname, cvalue, days) {
				var d = new Date();
				d.setTime(d.getTime() + (days*24*60*60*1000));
				var expires = "expires="+ d.toUTCString();
				document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
			}
			function reveal() {
				if (checkCookie("username")) {
					if (document.getElementById("pop").style.display == "flex") {
						document.getElementById("pop").style.display = "none";
					} else {
						document.getElementById("pop").style.display = "flex";
					}
				}
			}
			function getCookie(cname) {
				var name = cname + "=";
				var decodedCookie = decodeURIComponent(document.cookie);
				var ca = decodedCookie.split(';');
				for(var i = 0; i <ca.length; i++) {
					var c = ca[i];
					while (c.charAt(0) == ' ') {
						c = c.substring(1);
					}
					if (c.indexOf(name) == 0) {
						return c.substring(name.length, c.length);
					}
				}
				return "";
			}
			function checkCookie(cname) {
				var username = getCookie(cname);
				if (username == "") {
					return false;
				}
				else {
					return true;
				}
			}
			function fillBlank() {
				if (checkCookie("cookiePromptShown")) {
					if (getCookie("cookiePromptShown") == "yes") {
						document.getElementById("cookieBar").style.display = "none";
					}
				}
				if (!(checkCookie("cookiePromptShown"))) {
					document.getElementById("cookieBar").style.display = "flex";
				}
			}
			function delay(URL) {
				setTimeout(function() { window.location = URL }, 700);
			}
			function hideCookieBar() {
				setCookie("cookiePromptShown", "yes", 30);
				document.getElementById("cookieBar").style.display = "none";
			}
		</script>

	<body>
<html/>
